<!DOCTYPE html>
<html lang="es">
<head>
    <title>Terminales y Comisiones</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="/assets/img/card24.png" type="image/png" sizes="24x24">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/styles.css">
    <!-- Font Awesome para iconos -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YXFKJ5N9RC"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-YXFKJ5N9RC');
    </script>
    <script type="module" src="js/real-time-stats.js"></script>
    </head>
<body class="bg-custom">
    <!-- Navbar superior con logo integrado -->
    <nav class="navbar">
        <ul>
            <li>
                <a href="index.html" class="logo-tc-nav">
                  <img src="/assets/img/tyc.png" alt="T&C Logo" class="logo-tc-nav-img">
                </a>
            </li>
            <li><a href="calculadora.html">Calculadora</a></li>
            <li><a href="blog.html">Blog</a></li>
            <li><a href="promociones.html">Promociones</a></li>
            <li><a href="mailto:cajadeherramientasymas@gmail.com">Contacto</a></li>
        </ul>
    </nav>
    <header>
        <!-- El logo ya está en el navbar, así que se elimina aquí -->
        <div class="header-content">
            <div class="icon-terminal">
                <img src="/assets/img/terminal.png" alt="calc" class="img-calculadora">
            </div>
            <div class="header-text">
                <h1>
                    <span class="highlight">Terminales</span>
                    <span class="amp">&</span>
                    <span class="highlight2">Comisiones</span>
                </h1>
                <p class="subtitle">Conoce cuáles son las comisiones que te cobran las terminales de venta en México.</p>
            </div>
        </div>
    </header>

    <main>
        <section class="stats-section">
            <h2>Estadísticas en Tiem Real</h2>
            <div class="stats-grid">
                <!-- Tarjeta Usuarios Activos -->
                <div class="stat-card">
                <i class="fas fa-users"></i>
                <h3>Usuarios Activos</h3>
                <span id="active-users" class="counter">0</span>
            </div>        
        <!-- Tarjeta Consultas -->
        <div class="stat-card">
            <i class="fas fa-calculator"></i>
            <h3>Consultas Realizadas</h3>
            <span id="total-queries" class="counter">0</span>
        </div>        
        <!-- Tarjeta Calificación -->
        <div class="stat-card">
            <i class="fas fa-star"></i>
            <h3>Calificación Promedio</h3>
            <span id="avg-rating" class="counter">0.0</span>
        </div>
    </div>
</section>

        <section class="shortcuts">
            <h2>Secciones.</h2>
            <p class="subtitle-seccion">Accede rápidamente a las secciones más importantes de nuestro sitio.</p>
            <div class="shortcuts-desc">
                <a class="shortcut" href="calculadora.html">
                    <i class="fa-solid fa-calculator"></i>
                    <span class="shortcut-title">Calculadora</span>
                </a>
                <a class="shortcut" href="blog.html">
                    <i class="fa-solid fa-pen-to-square"></i>
                    <span class="shortcut-title">Blog</span>
                </a>
                <a class="shortcut" href="promociones.html">
                    <i class="fa-solid fa-percent"></i>
                    <span class="shortcut-title">Promociones</span>
                </a>
            </div>
        </section>

        <section class="donaciones">
            <h3>Donaciones</h3>
            <p class="donaciones-desc">
                ¿Te fue útil esta herramienta?<br>
                Este proyecto es gratuito. Si deseas apoyar su desarrollo y mantenimiento para agregar mucha más información relevante, puedes hacer una donación voluntaria. ¡Te lo agradeceré de corazón! 🙏
            </p>
            <div class="donaciones-links">
                <a href="#" class="donacion-link">PAYPAL</a> |
                <a href="#" class="donacion-link">BUY ME A COFFEE</a>
            </div>
        </section>

        <!-- Calificación: puedes usar Disqus o un sistema propio -->
        <!-- Ejemplo de integración Disqus (descomenta y reemplaza "example" por tu shortname) -->
        <!--
        <section class="comentarios">
            <div id="disqus_thread"></div>
            <script>
            var disqus_config = function () {
                this.page.url = window.location.href;
                this.page.identifier = 'index';
            };
            (function() {
                var d = document, s = d.createElement('script');
                s.src = 'https://example.disqus.com/embed.js';
                s.setAttribute('data-timestamp', +new Date());
                (d.head || d.body).appendChild(s);
            })();
            </script>
        </section>
        -->
    </main>

    <footer>
        <div class="footer-content">
            <div>
                <strong>Terminales & Comisiones</strong> &copy; 2025
            </div>
            <div>
                Desarrollado por Caja de Herramientas           </div>
        </div>
    </footer>
    <!-- Bootstrap JS (opcional, para componentes interactivos) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
    // Consulta tu API de métricas y actualiza la interfaz
    fetch('/api/metrics')
      .then(res => res.json())
      .then(data => {
        if(data.usuarios) document.getElementById('usuarios').textContent = data.usuarios;
        if(data.consultas) document.getElementById('consultas').textContent = data.consultas;
        if(data.calificacion) document.getElementById('calificacion').textContent = data.calificacion;
      })
      .catch(() => {
        // Si falla, deja los valores por defecto
      });
    </script>
    <!-- Configuración Firebase -->
<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
    import { getFirestore, doc, onSnapshot } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";

    // Tu configuración Firebase (la misma que usas en firebase-config.js)
        const firebaseConfig = {
        apiKey: "AIzaSyDLeaWXEJISPhLVU6LnHQ2FU7kmmEhu7H8",
        authDomain: "comisionesyterminales.firebaseapp.com",
        projectId: "comisionesyterminales",
        storageBucket: "comisionesyterminales.firebasestorage.app",
        messagingSenderId: "53437890803",
        appId: "1:53437890803:web:bc33099a24cb296f0a7786",
        measurementId: "G-YXFKJ5N9RC"
        };

    // Inicializar Firebase
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // Referencia al documento de estadísticas
    const statsRef = doc(db, "stats", "calculator");

    // Escuchar cambios en tiempo real
    onSnapshot(statsRef, (doc) => {
        const data = doc.data();
        if (data) {
            // Actualizar contadores
            document.getElementById('total-queries').textContent = data.queries || '0';
            
            // Formatear calificación promedio
            const avgRating = data.avg_rating ? data.avg_rating.toFixed(1) : '0.0';
            document.getElementById('avg-rating').textContent = avgRating;
            
            // Animación de contadores (opcional)
            animateCounters();
        }
    });

    // Función para animar los números (opcional)
    function animateCounters() {
        const counters = document.querySelectorAll('.counter');
        const speed = 200; // Duración de la animación en ms
        
        counters.forEach(counter => {
            const target = +counter.innerText;
            const increment = target / speed;
            let current = 0;
            
            const updateCount = () => {
                current += increment;
                if (current < target) {
                    counter.innerText = Math.ceil(current);
                    setTimeout(updateCount, 1);
                } else {
                    counter.innerText = target;
                }
            };
            
            updateCount();
        });
    }

    // Usuarios activos (simulación - en producción usa Analytics)
    let activeUsers = 0;
    setInterval(() => {
        activeUsers += Math.floor(Math.random() * 3);
        document.getElementById('active-users').textContent = activeUsers;
    }, 5000);
</script>
</body>
</html>
